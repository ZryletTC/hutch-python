

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Yaml Files &mdash; hutch-python 0.1.0rc1+63.g4eb3708 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="hutch-python 0.1.0rc1+63.g4eb3708 documentation" href="index.html"/>
        <link rel="next" title="Load" href="load.html"/>
        <link rel="prev" title="Hutch Setup" href="hutch_setup.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> hutch-python
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0rc1+63.g4eb3708
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="invokation.html">Invokation</a></li>
<li class="toctree-l1"><a class="reference internal" href="hutch_setup.html">Hutch Setup</a></li>
</ul>
<p class="caption"><span class="caption-text">Configuration</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Yaml Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-hutch_python.plugins.happi">Loading devices from Happi</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-hutch_python.plugins.questionnaire">Including the Questionnaire</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="load.html">Load</a></li>
<li class="toctree-l1"><a class="reference internal" href="experiment.html">Experiment</a></li>
<li class="toctree-l1"><a class="reference internal" href="namespace.html">Namespace</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="base_plugin.html">Plugin Spec</a></li>
<li class="toctree-l1"><a class="reference internal" href="log_setup.html">Logging Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utility Functions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hutch-python</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Yaml Files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/yaml_files.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="yaml-files">
<h1>Yaml Files<a class="headerlink" href="#yaml-files" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-hutch_python.plugins.happi">
<span id="loading-devices-from-happi"></span><h2>Loading devices from Happi<a class="headerlink" href="#module-hutch_python.plugins.happi" title="Permalink to this headline">¶</a></h2>
<p>This plugin depends on a JSON happi database stored somewhere in the file
system. The path of this file is supplied in the YAML as <code class="docutils literal"><span class="pre">filename</span></code>.
Finally, if a smaller subsection of the databse is desired, a requirements
specification can be used to limit the number of devices that are loaded.</p>
<p>The plugin then handles; initalizing the <code class="docutils literal"><span class="pre">happi.Client</span></code>, finding the
containers that match the specified requirements, then using the device
loading utilities from happi to create instantiated devices</p>
<p class="rubric">Example</p>
<div class="code YAML highlight-default"><div class="highlight"><pre><span></span><span class="n">happi</span><span class="p">:</span>
    <span class="n">filename</span><span class="p">:</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my_db</span><span class="o">.</span><span class="n">json</span>
    <span class="n">requirements</span><span class="p">:</span>
        <span class="n">active</span><span class="p">:</span> <span class="kc">True</span>
        <span class="n">beamline</span><span class="p">:</span> <span class="n">MFX</span>
</pre></div>
</div>
</div>
<div class="section" id="module-hutch_python.plugins.questionnaire">
<span id="including-the-questionnaire"></span><h2>Including the Questionnaire<a class="headerlink" href="#module-hutch_python.plugins.questionnaire" title="Permalink to this headline">¶</a></h2>
<p>This plugin depends on the QSBackend in <cite>happi</cite>. Not intended to be run
individually, it is expected that the requisite information is passed in the
<cite>experiment</cite> section. This includes the proposal id and run.</p>
<p>A connection to the Questionnaire webservice is made and the devices that have
enough information to be turned into Python objects are instantiated. There are
two possible methods of authentication to the QuestionnaireClient, Kerberos and
WS-Auth. The first is simpler but is not possible for all users, we therefore
search for a configuration file named <cite>qs.cfg</cite>, either hidden in the current
directory or the users home directory. This should contain the user and
password needed to authenticate into the QuestionnaireClient. The format of
this configuration file is the standard .ini structure and should define the
username and password like:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">MY_USERNAME</span>
<span class="n">pw</span> <span class="o">=</span> <span class="n">MY_PASSWORD</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="load.html" class="btn btn-neutral float-right" title="Load" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hutch_setup.html" class="btn btn-neutral" title="Hutch Setup" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0rc1+63.g4eb3708',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>